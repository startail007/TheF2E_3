(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{458:function(t,e,n){},459:function(t,e,n){},460:function(t,e,n){},469:function(t,e,n){},471:function(t,e,n){"use strict";n(458)},472:function(t,e,n){"use strict";n(459)},473:function(t,e,n){"use strict";n(460)},487:function(t,e,n){"use strict";n(469)},490:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-sheet",{staticClass:"content d-flex flex-column h-100"},[n("Header"),t._v(" "),n("v-main",{staticClass:"main"},[n("v-map",{ref:"myMap",staticClass:"w-100 h-100",attrs:{zoom:t.zoom,center:t.center,options:t.options},on:{"update:zoom":function(e){t.zoom=e},"update:center":function(e){t.center=e}}},[n("v-tilelayer",{attrs:{url:t.url,attribution:t.attribution}}),t._v(" "),n("v-geojson",{attrs:{geojson:t.geojson}})],1),t._v(" "),n("div",{staticClass:"floatBox pointer-events-none"},[n("router-view",{on:{info:t.view_info}})],1),t._v(" "),n("div",{staticClass:"floatBox pointer-events-none pa-2 d-flex justify-start justify-md-center align-end"},[n("v-btn",{staticClass:"pointer-events-auto",on:{click:t.currentPosition_click}},[t._v("目前位置")])],1)],1),t._v(" "),n("Footer")],1)};o._withStripped=!0;var i=n(457),a=n.n(i),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-app-bar",{staticClass:"bar",attrs:{app:"","elevate-on-scroll":""}},[n("v-container",{staticClass:"pa-0 fill-height"},[n("div",{staticClass:"d-flex flex-md-column align-center px-4"},[n("router-link",{attrs:{to:{path:"/"}}},[n("img",{staticClass:"logo",attrs:{src:t.logo}})])],1),t._v(" "),n("v-spacer"),t._v(" "),n("Menu",{staticClass:"d-none d-md-flex"}),t._v(" "),n("v-app-bar-nav-icon",{staticClass:"d-flex d-md-none",on:{click:function(e){t.$refs.sidebar.isOpen=!t.$refs.sidebar.isOpen}}})],1)],1),t._v(" "),n("Sidebar",{ref:"sidebar",scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"d-flex pa-4"},[n("v-spacer"),t._v(" "),n("v-icon",{on:{click:function(e){t.$refs.sidebar.isOpen=!1}}},[t._v(" mdi-close ")])],1),t._v(" "),n("Menu",{staticClass:"d-flex flex-column"})]},proxy:!0}])})],1)};r._withStripped=!0;var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-btn",{staticClass:"pageItem mx-2 text-body-1 px-2",attrs:{depressed:"",text:"",to:{path:"/bicycle"},id:"item01","active-class":"active",large:""},on:{click:function(e){return t.pageItem_click("/bicycle")}}},[n("div",{staticClass:"icon"}),t._v(" "),n("div",{staticClass:"text"},[t._v("自行車道")])]),t._v(" "),n("v-btn",{staticClass:"pageItem mx-2 text-body-1 px-2",attrs:{depressed:"",text:"",to:{path:"/attractions"},id:"item02","active-class":"active",large:""},on:{click:function(e){return t.pageItem_click("/attractions")}}},[n("div",{staticClass:"icon"}),t._v(" "),n("div",{staticClass:"text"},[t._v("周圍景點")])])],1)};s._withStripped=!0;var c={components:{},data:function(){return{}},mounted:function(){},methods:{pageItem_click:function(t){this.$route.path===t&&window.scroll({top:0,left:0,behavior:"smooth"})}},computed:{}},u=(n(471),n(142)),p=Object(u.a)(c,s,[],!1,null,"3111d13b",null);p.options.__file="src/vue/pages/components/Menu.vue";var l=p.exports,d=function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-navigation-drawer",{attrs:{right:"",app:"",temporary:""},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[t._t("content")],2)};d._withStripped=!0;var v={components:{},props:{},watch:{},data:function(){return{isOpen:!1,resizeID:void 0}},mounted:function(){window.addEventListener("resize",this.resize)},beforeDestroy:function(){window.removeEventListener("resize",this.resize)},methods:{resize:function(){var t=this;clearTimeout(this.resizeID),this.resizeID=setTimeout((function(){t.isOpen&&t.$vuetify.breakpoint.mdAndUp&&(t.isOpen=!1)}),300)}},computed:{}},f=Object(u.a)(v,d,[],!1,null,"2e4a0ea0",null);f.options.__file="src/vue/pages/components/Sidebar.vue";var m=f.exports,h=n.p+"img/logo.268da506bb3db6456d1d7d386c039918.png",g={components:{Menu:l,Sidebar:m},data:function(){return{logo:h}},mounted:function(){},methods:{},computed:{}},b=(n(472),Object(u.a)(g,r,[],!1,null,"023c3669",null));b.options.__file="src/vue/pages/components/Header.vue";var _=b.exports,y=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"footer px-3 py-md-2"},[e("v-container",{staticClass:"pa-0"},[e("div",{staticClass:"rightsReserved text-center my-2 text-caption text-md-body-2"},[this._v("\n      © Code: "),e("a",{attrs:{href:"https://github.com/virtools",target:"_blank"}},[this._v("Wei")]),this._v(" / Design:\n      "),e("a",{attrs:{href:"",target:"_blank"}},[this._v("XX")])])])],1)};y._withStripped=!0;var x={components:{},data:function(){return{}},mounted:function(){},methods:{},computed:{}},w=(n(473),Object(u.a)(x,y,[],!1,null,"3dec5b12",null));w.options.__file="src/vue/pages/components/Footer.vue";var C=w.exports,O=n(143),k=(n(8),n.p+"img/marker-icon.857928a348fff5ab824b694af2c7c309.png"),S=n.p+"img/marker-shadow.a0c6cc1401c107b501efee6477816891.png",j=n(461);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T={mixins:[O.a],components:{Header:_,Footer:C},data:function(){return{geojson:null,zoom:9,center:[22.9,120.65],url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',options:{minZoom:8,maxZoom:18,zoomControl:!1,animate:!0},mapPopupText:{StationName:"名稱",latLng:"經緯度",BikesCapacity:"可容納自行車總數",ServiceType:"服務類型"}}},mounted:function(){var t=this,e=L.markerClusterGroup({iconCreateFunction:function(t){var e=t.getAllChildMarkers();return L.divIcon({html:'<div class="text">'.concat(e.length,"</div>"),className:"mycluster",iconSize:L.point(40,40)})}});this.map.addLayer(e);var n=this.getAuthorizationHeader(),o=[];["Taichung","Hsinchu","MiaoliCounty","NewTaipei","PingtungCounty","KinmenCounty","Taoyuan","Taipei","Kaohsiung","Tainan","Chiayi"].forEach((function(t){var e=t;o.push(Object(j.o)("https://ptx.transportdata.tw/MOTC/v2/Bike/Station/",{headers:z({},n)}).get(e).query({$format:"JSON"}).then((function(t){return t})))}));Promise.all(o).then((function(n){t.locations=n.flat().map((function(t){return{id:t.StationUID,latLng:[t.StationPosition.PositionLat,t.StationPosition.PositionLon],StationName:t.StationName.Zh_tw.split("_")[1],BikesCapacity:t.BikesCapacity,ServiceType:1===t.ServiceType?"YouBike1.0":"YouBike2.0"}}));var o=L.icon({iconUrl:k,shadowUrl:S,iconSize:[25,41],shadowSize:[41,41],iconAnchor:[12.5,41],shadowAnchor:[12.5,41],popupAnchor:[0,-32]}),i=t.locations.map((function(e){return L.marker(new L.LatLng(e.latLng[0],e.latLng[1]),{icon:o}).bindPopup(function(e){var n="";if(e){for(var o in t.mapPopupText){var i;n+='<tr><td class="pa-1">'.concat(t.mapPopupText[o],'</td><td class="pa-1">').concat(null!==(i=e[o])&&void 0!==i?i:"","</td></tr>")}n="<table><tbody>".concat(n,"</tbody></table>")}return n}(e))}));e.addLayers(i)}))},methods:{click:function(t){console.log("clusterclick",t)},ready:function(t){console.log("ready",t)},do_something:function(t,e){this.map.setView([t,e],16)},currentPosition_click:function(){var t=this;navigator.geolocation.getCurrentPosition((function(e){var n=e.coords;t.do_something(n.latitude,n.longitude)}),(function(t){}))},view_info:function(t,e,n){"geometry"===e&&(this.geojson=n)}},computed:{map:function(){return this.$refs.myMap.mapObject}}},$=(n(487),Object(u.a)(T,o,[],!1,null,"6c01d306",null));$.options.__file="src/vue/pages/Main.vue";e.default=$.exports}}]);